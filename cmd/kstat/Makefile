# Write The Main Code Name Here Without Any Extensions


# Spcify Compiler
CC = gcc


# Write The Input Path for Header Files and Objects
INPUT_PATH = ./headers/


# Specify Headers : The ".h" Files for your Library 
HEADERS = $(INPUT_PATH)kstat_structure.h 	\
		$(INPUT_PATH)kstat_error_msg.h 	\
		$(INPUT_PATH)kstat_functions.h 	\
		

# Specify Objects : The ".o" Files Generated by Compiling the ".cpp" Files
OBJECTS = $(INPUT_PATH)kstat_structure.o	\
		$(INPUT_PATH)kstat_error_msg.o 	\
		$(INPUT_PATH)kstat_functions.o 	\


# Object File for kstat_structure : Initializes the structure elements
$(INPUT_PATH)kstat_structure.o : $(patsubst %.o, %.c, $@) $(INPUT_PATH)kstat_structure.h
	$(CC) -c $(patsubst %.o, %.c, $@) -o $@



# Object File for kstat_error_msg : Contains all the error messages with the kstat command
$(INPUT_PATH)kstat_error_msg.o : $(patsubst %.o, %.c, $@) $(INPUT_PATH)kstat_error_msg.h
	$(CC) -c $(patsubst %.o, %.c, $@) -o $@


# Object File for kstat_functions : Contains all the functions related to kstat
$(INPUT_PATH)kstat_functions.o : $(patsubst %.o, %.c, $@) $(INPUT_PATH)kstat_functions.h
	$(CC) -c $(patsubst %.o, %.c, $@) -o $@



	 
# Compilation of the Main Code
ifneq ($(MAKECMDGOALS), clean)
$(MAKECMDGOALS) : $(MAKECMDGOALS).o $(OBJECTS)
	$(CC) -o $(MAKECMDGOALS) -lm -lkstat $(MAKECMDGOALS).o $(OBJECTS)  

# Main Code Object File
$(MAKECMDGOALS).o : $(MAKECMDGOALS).c $(HEADERS) $(OPENCV_HEADERS) 
	$(CC) -c $(MAKECMDGOALS).c 
endif

	


.PHONY : clean
clean :
	rm -f $(OBJECTS) *.o
